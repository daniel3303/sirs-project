(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(67),i=a.n(s),c=a(4),o=a(6),l=(a(92),a(80)),u=a(10),m=a(16),p=a(13),d=a(11),f=a(14),h=a(126),E=a(123),g=a(124),v=a(125),b=a(32),y=a(119),O=a(7),w=a(8),j=a.n(w),I=a(24),N=a(81),S=a.n(N).a.create({baseURL:"http://localhost:8000"}),R=function(e){return function(){var t=Object(I.a)(j.a.mark(function t(a,r){var n,s;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.get("/files/".concat(e),{params:{username:r().auth.username,password:r().auth.password}});case 2:n=t.sent,"success"===(s=n.data).status&&a({type:"FETCH_FILE",payload:s.file});case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(I.a)(j.a.mark(function t(a,r){var n,s;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.get("/files/".concat(e,"/roles"),{params:{username:r().auth.username,password:r().auth.password}});case 2:n=t.sent,s=n.data,a({type:"FETCH_ROLES",payload:{fileId:e,roles:s.roles}});case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},F=a(121),k=a(120),C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).renderInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("input",Object.assign({},t,{autoComplete:"off"})),a.renderError(s))},a.renderTextareaInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("textarea",Object.assign({},t,{autoComplete:"off"})),a.renderError(s))},a.onSubmit=function(e){a.props.onSubmit(e),a.props.reset()},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return n.a.createElement("div",{className:"ui error message"},n.a.createElement("div",{className:"header"},t))}},{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},n.a.createElement(F.a,{name:"name",component:this.renderInput,label:"File's name"}),n.a.createElement(F.a,{name:"content",component:this.renderTextareaInput,label:"File's content"}),n.a.createElement("button",{className:"ui button primary"},"Save"))}}]),t}(n.a.Component),_=Object(k.a)({form:"fileForm",validate:function(e){var t={};return e.name||(t.title="You must enter a file name"),e.content||""==e.content||(t.description="You must enter a description"),t},enableReinitialize:!0})(C),x=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).onSubmit=function(e){a.props.createFile(e)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"ui huge header"},"Create a new file"),n.a.createElement(_,{onSubmit:this.onSubmit}))}}]),t}(n.a.Component),U=Object(c.b)(null,{createFile:function(e){return function(){var t=Object(I.a)(j.a.mark(function t(a,r){var n;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.post("/files/create",Object(O.a)({},e,{username:r().auth.username,password:r().auth.password}));case 2:n=t.sent,a({type:"CREATE_FILE"}),a(R(n.data.file.id));case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}})(x),T=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).interval=null,a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchFiles(),this.interval=setInterval(function(){e.props.fetchFiles()},2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderList",value:function(){var e=this;return 0==this.props.files.length?n.a.createElement("div",null,"You have no files!"):this.props.files.map(function(t){return n.a.createElement("div",{className:"item",key:t.id},n.a.createElement("i",{className:"large middle aligned icon file"}),n.a.createElement("div",{className:"content"},n.a.createElement(y.a,{to:"/files/".concat(t.id),className:"header"},t.name),n.a.createElement("div",{className:"description"},"Permissions: ",t.permissions.read?"r":"",t.permissions.write?"w":"",t.owner===e.props.userId?n.a.createElement("div",null,"You own this file"):n.a.createElement("div",null,"You DO NOT own this file"),!0===t.corrupted?n.a.createElement("div",{className:"ui orange header",style:{fontSize:"1em"}},"This file is corrupted"):"")))})}},{key:"render",value:function(){return n.a.createElement("div",{className:"ui grid centered"},n.a.createElement("div",{className:"seven wide column"},n.a.createElement("div",{className:"ui huge header"},"List of files ",this.props.files.length>0?"("+this.props.files.length+")":""),n.a.createElement("div",{className:"ui celled list"},this.renderList())),n.a.createElement("div",{className:"five wide column"},n.a.createElement(U,null)))}}]),t}(n.a.Component),A=Object(c.b)(function(e){var t;return t={userId:e.auth.userId,files:Object.values(e.files)},Object(b.a)(t,"userId",e.auth.userId),Object(b.a)(t,"isLoggedIn",e.auth.isLoggedIn),t},{fetchFiles:function(){return function(){var e=Object(I.a)(j.a.mark(function e(t,a){var r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/files",{params:{username:a().auth.username,password:a().auth.password}});case 2:r=e.sent,t({type:"FETCH_FILES",payload:r.data.files});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}})(T),G=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).componentDidMount=function(){a.props.fetchUsers()},a.renderInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("input",Object.assign({},t,{autoComplete:"off"})),a.renderError(s))},a.renderBooleanInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("select",Object.assign({},t,{autoComplete:"off"}),n.a.createElement("option",{value:"",disabled:!0,defaultValue:!0},"Select an option"),n.a.createElement("option",{value:"true"},"Yes"),n.a.createElement("option",{value:"false"},"No")),a.renderError(s))},a.renderUserSelectInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("select",Object.assign({},t,{autoComplete:"off"}),a.props.users.map(function(e){return n.a.createElement("option",{value:e.id,key:e.id},e.username," (",e.name,")")})),a.renderError(s))},a.onSubmit=function(e){a.props.onSubmit(e)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return n.a.createElement("div",{className:"ui error message"},n.a.createElement("div",{className:"header"},t))}},{key:"render",value:function(){return n.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},n.a.createElement(F.a,{name:"userId",component:this.renderUserSelectInput,label:"Target user"}),n.a.createElement(F.a,{name:"read",component:this.renderBooleanInput,label:"Read permissions"}),n.a.createElement(F.a,{name:"write",component:this.renderBooleanInput,label:"Write permissions"}),n.a.createElement("button",{className:"ui button primary"},"Save"))}}]),t}(n.a.Component),M=Object(c.b)(function(e){return{users:Object.values(e.users)}},{fetchUsers:function(){return function(){var e=Object(I.a)(j.a.mark(function e(t,a){var r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.get("/users",{params:{username:a().auth.username,password:a().auth.password}});case 2:r=e.sent,t({type:"FETCH_USERS",payload:r.data.users});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}})(Object(k.a)({form:"fileRolesForm",validate:function(e){var t={};return e.userId||(t.title="You must enter a file name"),e.read||(t.read="You must select a value for the read permission"),e.write||(t.write="You must select a value for the write permission"),t},enableReinitialize:!0})(G)),Y=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).componentDidMount=function(){a.props.fetchRoles(a.props.fileId)},a.onRevokeClick=function(e){a.props.revokeRole(a.props.fileId,e)},a.renderRoles=function(){return 0==a.props.roles.length?n.a.createElement("div",null,"This file has no roles assign to it."):a.props.roles.map(function(e,t){return n.a.createElement("div",{className:"item",key:t},n.a.createElement("div",{className:"right floated content"},n.a.createElement("div",{className:"ui button",onClick:function(){a.onRevokeClick(e.user.id)}},"Revoke")),n.a.createElement("img",{className:"ui avatar image",src:"/app/avatar.png"}),n.a.createElement("div",{className:"content"},n.a.createElement("span",{className:"header"},e.user.username," (",e.user.name,")"),"Permissions:  ",e.read?"read ":"",e.write?"write":""))})},a.render=function(){return a.props.file.owner!=a.props.userId?n.a.createElement("div",null,"You can\xb4t see the roles for this file because you don't own it."):a.props.file.roles?n.a.createElement("div",{className:"ui middle aligned divided list"},a.renderRoles()):n.a.createElement("div",null,"Loading...")},a}return Object(f.a)(t,e),t}(n.a.Component),D=Object(c.b)(function(e,t){return{file:e.files[t.fileId],roles:e.files[t.fileId].roles,userId:e.auth.userId}},{fetchRoles:L,revokeRole:function(e,t){return function(){var a=Object(I.a)(j.a.mark(function a(r,n){var s;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={username:n().auth.username,password:n().auth.password,userId:t,read:!1,write:!1},a.next=3,S.post("/files/".concat(e,"/roles"),s);case 3:a.sent.data,r({type:"REVOKE_ROLE",payload:{fileId:e}}),r(L(e));case 7:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()}})(Y),H=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).interval=null,a.startFileMonitoring=function(){null==a.interval&&(a.interval=setInterval(function(){a.props.checkFileChanged(a.props.match.params.id)},2e3))},a.stopFileMonitoring=function(){null!=a.interval&&(clearInterval(a.interval),a.interval=null)},a.onFileFormSubmit=function(e){a.props.updateFile(a.props.match.params.id,e),a.stopFileMonitoring(),setTimeout(a.startFileMonitoring,2e3)},a.onFileRoleFormSubmit=function(e){a.props.createRole(a.props.match.params.id,e)},a.refetchFile=function(){a.props.fetchFile(a.props.match.params.id)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){this.props.fetchFile(this.props.match.params.id),this.startFileMonitoring()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"renderFileChanged",value:function(){return this.props.fileChanged&&!this.props.file.corrupted?n.a.createElement("div",{className:"ui red message"},n.a.createElement("div",{className:"header",style:{textAlign:"center"}},n.a.createElement("p",null,"Seems like this file was updated by someone else."),n.a.createElement("button",{className:"ui button",onClick:this.refetchFile},n.a.createElement("i",{className:"sync icon"})," Reload file"))):""}},{key:"renderFileCorrupted",value:function(){return this.props.corrupted?n.a.createElement("div",{className:"ui red message"},n.a.createElement("div",{className:"header",style:{textAlign:"center"}},n.a.createElement("p",null,"This file is corrupted and because of that the content may have been changed.",n.a.createElement("br",null),"Your changes will override the corrupted file."))):""}},{key:"render",value:function(){return this.props.file?n.a.createElement("div",{className:"ui grid centered"},n.a.createElement("div",{className:"seven wide column"},this.renderFileCorrupted(),this.renderFileChanged(),n.a.createElement("div",{className:"ui huge header"},"Edit file: ",this.props.file.name),n.a.createElement(_,{initialValues:{name:this.props.file.name,content:this.props.file.content},onSubmit:this.onFileFormSubmit}),n.a.createElement("br",null),n.a.createElement(y.a,{to:"/",className:"header"},n.a.createElement("button",{className:"ui labeled icon button"},n.a.createElement("i",{className:"chevron left icon"}),"Return to list of files"))),n.a.createElement("div",{className:"five wide column"},n.a.createElement("div",{className:"ui huge header"},"Roles to this file"),n.a.createElement(D,{fileId:this.props.file.id}),n.a.createElement("div",{className:"ui huge header"},"Edit file roles"),this.props.userId===this.props.file.owner?n.a.createElement(M,{onSubmit:this.onFileRoleFormSubmit}):n.a.createElement("div",null,"You can't change permissions for this file because you don\xb4t own it."))):n.a.createElement("div",null,"Loading...")}}]),t}(n.a.Component),B=Object(c.b)(function(e,t){return{file:e.files[t.match.params.id],userId:e.auth.userId,fileChanged:e.files[t.match.params.id].changed,corrupted:e.files[t.match.params.id].corrupted}},{fetchFile:R,updateFile:function(e,t){return function(){var a=Object(I.a)(j.a.mark(function a(r,n){return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.post("/files/".concat(e),Object(O.a)({},t,{username:n().auth.username,password:n().auth.password}));case 2:"success"===a.sent.data.status&&(r({type:"UPDATE_FILE",payload:Object(O.a)({},t,{id:e})}),r(R(e)));case 5:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()},createRole:function(e,t){return function(){var a=Object(I.a)(j.a.mark(function a(r,n){return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,S.post("/files/".concat(e,"/roles"),Object(O.a)({},t,{username:n().auth.username,password:n().auth.password}));case 2:a.sent,r({type:"CREATE_ROLE"}),r(L(e));case 5:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()},checkFileChanged:function(e){return function(){var t=Object(I.a)(j.a.mark(function t(a,r){var n,s,i,c,o;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.get("/files/".concat(e),{params:{username:r().auth.username,password:r().auth.password}});case 2:n=t.sent,"success"===(s=n.data).status&&(i=r().files[e],c=!1,o=s.file.corrupted,i.content==s.file.content&&i.name==s.file.name||(c=!0),a({type:"FILE_CHANGED",payload:{id:e,changed:c,corrupted:o}}));case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}})(H),P=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).onSubmit=function(e){var t=e.username,r=e.password;a.props.login(t,r)},a.renderInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("input",Object.assign({},t,{autoComplete:"off"})),a.renderError(s))},a.renderSubmitButton=function(){return!0===a.props.checkingLogin?n.a.createElement("button",{className:"ui button primary"},n.a.createElement("i",{className:"notched circle loading icon button"})," Checking credentials..."):n.a.createElement("button",{className:"ui button primary"},"Login")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return n.a.createElement("div",{className:"ui error message"},n.a.createElement("div",{className:"header"},t))}},{key:"render",value:function(){return n.a.createElement("div",{className:"ui grid centered"},n.a.createElement("div",{className:"seven wide column"},n.a.createElement("div",{className:"ui huge header centered"},"Login into your account"),n.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},n.a.createElement(F.a,{name:"username",component:this.renderInput,label:"Username"}),n.a.createElement(F.a,{name:"password",component:this.renderInput,label:"Password"}),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.a.createElement("div",null,this.renderSubmitButton()),n.a.createElement("div",null,n.a.createElement(y.a,{to:"/register",className:"header"},"Create a new account")))),this.props.triedLogin&&!this.props.isLoggedIn?n.a.createElement("p",{className:"ui red header"},"Login failed!"):""))}}]),t}(n.a.Component),V=Object(c.b)(function(e,t){return{triedLogin:e.auth.triedLogin,isLoggedIn:e.auth.isLoggedIn,checkingLogin:e.auth.checkingLogin}},{login:function(e,t){return function(){var a=Object(I.a)(j.a.mark(function a(r,n){var s;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:"USER_LOGIN"}),a.next=3,S.post("/users",{username:e,password:t});case 3:"success"===(s=a.sent).data.status?r({type:"USER_LOGIN_SUCCESS",payload:{username:e,password:t,name:s.data.name,userId:s.data.userId,loggedFromRegister:!1}}):r({type:"USER_LOGIN_FAILED"});case 5:case"end":return a.stop()}},a,this)}));return function(e,t){return a.apply(this,arguments)}}()}})(Object(k.a)({form:"loginForm",validate:function(e){var t={};return e.username||(t.username="You must type in your username"),e.password||(t.password="You must type in your password"),t}})(P)),z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).onSubmit=function(e){var t=e.name,r=e.username,n=e.password;a.props.register(t,r,n)},a.renderInput=function(e){var t=e.input,r=e.label,s=e.meta,i="field ".concat(s.error&&s.touched?"error":"");return n.a.createElement("div",{className:i},n.a.createElement("label",null,r),n.a.createElement("input",Object.assign({},t,{autoComplete:"off"})),a.renderError(s))},a.renderSubmitButton=function(){return!0===a.props.checkingRegister?n.a.createElement("button",{className:"ui button primary"},n.a.createElement("i",{className:"notched circle loading icon button"})," Creating your account..."):n.a.createElement("button",{className:"ui button primary"},"Register")},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"renderError",value:function(e){var t=e.error;if(e.touched&&t)return n.a.createElement("div",{className:"ui error message"},n.a.createElement("div",{className:"header"},t))}},{key:"render",value:function(){return this.props.registeredSuccess?n.a.createElement(E.a,{to:"/"}):n.a.createElement("div",{className:"ui grid centered"},n.a.createElement("div",{className:"seven wide column"},n.a.createElement("div",{class:"ui huge header centered"},"Create a new account"),n.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"ui form error"},n.a.createElement(F.a,{name:"name",component:this.renderInput,label:"Name"}),n.a.createElement(F.a,{name:"username",component:this.renderInput,label:"Username"}),n.a.createElement(F.a,{name:"password",component:this.renderInput,label:"Password"}),n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},this.renderSubmitButton(),n.a.createElement(y.a,{to:"/",className:"header"},"Login into your account"))),this.props.registerFailedMessage?n.a.createElement("p",{className:"ui red header"},this.props.registerFailedMessage):""))}}]),t}(n.a.Component),K=Object(c.b)(function(e,t){return{isLoggedIn:e.auth.isLoggedIn,registeredSuccess:e.auth.registeredSuccess,checkingRegister:e.auth.checkingRegister,registerFailedMessage:e.auth.registerFailedMessage}},{register:function(e,t,a){return function(){var r=Object(I.a)(j.a.mark(function r(n,s){var i,c;return j.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:"USER_REGISTER"}),r.next=3,S.post("/users/create",{name:e,username:t,password:a});case 3:i=r.sent,"success"===(c=i.data).status?(n({type:"USER_REGISTER_SUCCESS"}),n({type:"USER_LOGIN_SUCCESS",payload:{userId:c.userId,username:t,password:a,name:c.name,loggedFromRegister:!0}})):n({type:"USER_REGISTER_FAILED",payload:c.message});case 6:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}()}})(Object(k.a)({form:"registerForm",validate:function(e){var t={};return e.name||(t.password="You must type in your name"),e.username||(t.username="You must type in your username"),e.password||(t.password="You must type in your password"),t}})(z)),W=function(e){function t(){var e,a;Object(u.a)(this,t);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(a=Object(p.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).onLogoutClick=function(){a.props.logout()},a.render=function(){return a.props.isLoggedIn?n.a.createElement("div",{className:"item",style:{display:"flex",alignItems:"center",height:"100%"}},n.a.createElement("img",{className:"ui mini circular image",src:"/app/avatar.png"}),n.a.createElement("div",{className:"content",style:{marginLeft:"10px"}},n.a.createElement("div",{className:"ui sub header"},a.props.name),n.a.createElement("span",{style:{cursor:"pointer"},onClick:a.onLogoutClick},"Logout"))):n.a.createElement("div",{className:"item",style:{display:"flex",alignItems:"center",height:"100%"}},n.a.createElement(y.a,{to:"/"},n.a.createElement("button",{className:"ui secondary button"},n.a.createElement("i",{className:"icon users"}),"Login")),n.a.createElement(y.a,{to:"/register"},n.a.createElement("button",{className:"ui secondary button"},n.a.createElement("i",{className:"icon wpforms"}),"Register")))},a}return Object(f.a)(t,e),t}(n.a.Component),J=Object(c.b)(function(e,t){return{isLoggedIn:e.auth.isLoggedIn,name:e.auth.name}},{logout:function(){return{type:"USER_LOGOUT"}}})(W),X=function(){return n.a.createElement("div",{className:"ui secondary pointing menu",style:{backgroundColor:"#cacaca"}},n.a.createElement("div",{className:"item",style:{display:"flex",alignItems:"center",height:"100%"}},n.a.createElement(y.a,{to:"/",style:{fontSize:"24px",color:"black"}},"SIRS@A47")),n.a.createElement("div",{className:"right menu"},n.a.createElement(J,null)))},q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=function(){},a.renderLoggedOutRoutes=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{path:"/app/register",exact:!0,component:K}),n.a.createElement(h.a,{path:"/app/login",exact:!0,component:V}),n.a.createElement(h.a,{path:"/app/",exact:!0,component:V}),n.a.createElement(h.a,{path:"/app/index.html",exact:!0,component:function(){return n.a.createElement(E.a,{to:"/app/"})}}))},a.renderLoggedInRoutes=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{path:"/app/files/:id",exact:!0,component:B}),n.a.createElement(h.a,{path:"/app/files",exact:!0,component:A}),n.a.createElement(h.a,{path:"/app/",exact:!0,component:function(){return n.a.createElement(E.a,{to:"/app/files"})}}),n.a.createElement(h.a,{path:"/app/index.html",exact:!0,component:function(){return n.a.createElement(E.a,{to:"/app/"})}}))},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement(g.a,null,n.a.createElement(n.a.Fragment,null,n.a.createElement(X,null),n.a.createElement(v.a,null,this.props.isLoggedIn?this.renderLoggedInRoutes():this.renderLoggedOutRoutes())))}}]),t}(n.a.Component),Q=Object(c.b)(function(e){return{isLoggedIn:e.auth.isLoggedIn}})(q),Z=a(122),$={checkingRegister:!1,registeredSuccess:null,loggedFromRegister:!1,registerFailedMessage:"",checkingLogin:!1,triedLogin:!1,isLoggedIn:!1,userId:null,username:"",password:"",name:""},ee=a(49),te=a.n(ee),ae=Object(o.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(O.a)({},e,{checkingLogin:!0});case"USER_LOGIN_SUCCESS":return Object(O.a)({},e,{isLoggedIn:!0,userId:t.payload.userId,username:t.payload.username,password:t.payload.password,name:t.payload.name,loggedFromRegister:t.payload.loggedFromRegister,checkingLogin:!1,triedLogin:!0});case"USER_LOGIN_FAILED":return Object(O.a)({},e,{checkingLogin:!1,triedLogin:!0});case"USER_LOGOUT":return Object(O.a)({},$);case"USER_REGISTER":return Object(O.a)({},e,{checkingRegister:!0});case"USER_REGISTER_SUCCESS":return Object(O.a)({},e,{checkingRegister:!1,registeredSuccess:!0});case"USER_REGISTER_FAILED":return Object(O.a)({},e,{registerFailedMessage:t.payload,checkingRegister:!1});default:return e}},form:Z.a,users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS":return Object(O.a)({},e,te.a.mapKeys(t.payload,"id"));case"USER_LOGOUT":return{}}return e},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FILES":return Object(O.a)({},te.a.mapKeys(t.payload,"id"));case"FETCH_FILE":return te.a.merge({},e,Object(b.a)({},t.payload.id,Object(O.a)({},t.payload,{changed:!1})));case"UPDATE_FILE":return te.a.merge({},e,Object(b.a)({},t.payload.id,t.payload));case"CREATE_FILE":case"CREATE_ROLE":return Object(O.a)({},e);case"FETCH_ROLES":return(a=Object(O.a)({},e))[t.payload.fileId].roles=t.payload.roles,a;case"REVOKE_ROLE":return Object(O.a)({},e);case"USER_LOGOUT":return{};case"FILE_CHANGED":var a;return(a=Object(O.a)({},e))[t.payload.id].changed=t.payload.changed,a[t.payload.id].corrupted=t.payload.corrupted,a;default:return e}}}),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,ne=Object(o.e)(ae,re(Object(o.a)(l.a)));i.a.render(n.a.createElement(c.a,{store:ne},n.a.createElement(Q,null)),document.querySelector("#root"))},84:function(e,t,a){e.exports=a(118)}},[[84,2,1]]]);
//# sourceMappingURL=main.13a8bf6b.chunk.js.map