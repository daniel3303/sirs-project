{"version":3,"sources":["apis/sirs.js","actions/index.js","actions/types.js","components/files/FileForm.js","components/files/FileCreate.js","components/files/FilesList.js","components/files/FileRolesForm.js","components/files/FileRolesList.js","components/files/FileEdit.js","components/Login.js","components/Register.js","components/UserHeaderMenu.js","components/Header.js","components/App.js","reducers/authReducer.js","reducers/index.js","reducers/userReducer.js","reducers/fileReducer.js","index.js"],"names":["axios","create","baseURL","fetchFile","id","_ref5","Object","asyncToGenerator","regenerator_default","a","mark","_callee4","dispatch","getState","_ref6","data","wrap","_context4","prev","next","sirs","get","concat","params","username","auth","password","sent","status","type","payload","file","stop","this","_x7","_x8","apply","arguments","fetchRoles","fileId","_ref12","_callee9","_ref13","_context9","roles","_x17","_x18","FileForm","renderInput","_ref","input","label","meta","className","error","touched","react_default","createElement","assign","autoComplete","_this","renderError","renderTextareaInput","_ref2","onSubmit","formValues","props","reset","_ref3","handleSubmit","Field","name","component","React","Component","reduxForm","form","validate","errors","title","content","description","enableReinitialize","FileCreate","createFile","files_FileForm","connect","values","_ref9","_callee6","response","_context6","post","objectSpread","_x11","_x12","FilesList","interval","_this2","fetchFiles","setInterval","clearInterval","_this3","files","length","map","key","Link","to","permissions","read","write","owner","userId","corrupted","style","fontSize","renderList","files_FileCreate","state","defineProperty","isLoggedIn","_ref4","_callee3","_context3","_x5","_x6","FileRolesForm","componentDidMount","fetchUsers","renderBooleanInput","value","disabled","defaultValue","renderUserSelectInput","users","user","_ref10","_callee7","_context7","_x13","_x14","FileRolesList","onRevokeClick","revokeRole","renderRoles","role","index","onClick","src","render","ownProps","_ref14","_callee10","_context10","_x19","_x20","FileEdit","startFileMonitoring","checkFileChanged","match","stopFileMonitoring","onFileFormSubmit","updateFile","setTimeout","onFileRoleFormSubmit","createRole","refetchFile","fileChanged","textAlign","renderFileCorrupted","renderFileChanged","initialValues","files_FileRolesList","files_FileRolesForm","changed","newValues","_ref7","_callee5","_context5","_x9","_x10","_ref11","_callee8","_context8","_x15","_x16","_ref16","_callee11","_ref17","localFile","_context11","_x21","_x22","Login","login","renderSubmitButton","checkingLogin","display","justifyContent","alignItems","triedLogin","_callee","_context","loggedFromRegister","_x","_x2","Register","register","checkingRegister","registeredSuccess","Redirect","class","registerFailedMessage","_callee2","_context2","message","_x3","_x4","UserHeaderMenu","onLogoutClick","logout","height","marginLeft","cursor","Header","backgroundColor","color","components_UserHeaderMenu","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","renderLoggedOutRoutes","Fragment","Route","path","exact","renderLoggedInRoutes","BrowserRouter","components_Header","Switch","INITIAL_STATE","combineReducers","undefined","action","formReducer","_","mapKeys","merge","newState","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM","es","components_App","document","querySelector"],"mappings":"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","file":"static/js/main.13a8bf6b.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nexport default axios.create({\r\n    baseURL: 'http://localhost:8000'\r\n});\r\n","import sirs from \"../apis/sirs\";\r\n\r\nimport{\r\n    USER_LOGIN,\r\n    USER_LOGIN_FAILED,\r\n    USER_LOGIN_SUCCESS,\r\n    USER_LOGOUT,\r\n    USER_REGISTER,\r\n    USER_REGISTER_SUCCESS,\r\n    USER_REGISTER_FAILED,\r\n    FETCH_FILES,\r\n    FETCH_FILE,\r\n    UPDATE_FILE,\r\n    CREATE_FILE,\r\n    FETCH_USERS,\r\n    CREATE_ROLE,\r\n    FETCH_ROLES,\r\n    REVOKE_ROLE,\r\n    FILE_CHANGED\r\n}  from \"./types\";\r\n\r\nexport const login = (username, password) => async (dispatch, getState) => {\r\n    dispatch({ type: USER_LOGIN });\r\n    const response = await sirs.post('/users', { username, password });\r\n\r\n    if(response.data.status === \"success\"){\r\n        dispatch({ type: USER_LOGIN_SUCCESS, payload: { username, password, name: response.data.name, userId: response.data.userId, loggedFromRegister: false } });\r\n    }else{\r\n        dispatch({ type: USER_LOGIN_FAILED });\r\n    }\r\n\r\n};\r\n\r\nexport const register = (name, username, password) => async (dispatch, getState) => {\r\n    dispatch({ type: USER_REGISTER });\r\n    const {data} = await sirs.post('/users/create', { name, username, password });\r\n\r\n    if(data.status === \"success\"){\r\n        dispatch({ type: USER_REGISTER_SUCCESS });\r\n        dispatch({ type: USER_LOGIN_SUCCESS, payload: { userId: data.userId, username, password, name: data.name, loggedFromRegister: true} });\r\n    }else{\r\n        dispatch({ type: USER_REGISTER_FAILED, payload: data.message });\r\n    }\r\n\r\n};\r\n\r\nexport const logout = () => {\r\n    return {\r\n        type: USER_LOGOUT\r\n    };\r\n};\r\n\r\nexport const fetchFiles = () => async (dispatch, getState) => {\r\n    const response = await sirs.get('/files', {params: { username: getState().auth.username, password: getState().auth.password }});\r\n\r\n    dispatch({\r\n            type: FETCH_FILES,\r\n            payload: response.data.files\r\n    });\r\n};\r\n\r\n\r\nexport const fetchFile = (id) => async (dispatch, getState) => {\r\n    const {data} = await sirs.get(`/files/${id}`, {params: { username: getState().auth.username, password: getState().auth.password }});\r\n\r\n    if(data.status === \"success\"){\r\n        dispatch({\r\n                type: FETCH_FILE,\r\n                payload: data.file\r\n        });\r\n    }\r\n};\r\n\r\nexport const updateFile = (id, newValues) => async (dispatch, getState) => {\r\n    const {data} = await sirs.post(`/files/${id}`, {...newValues, username: getState().auth.username, password: getState().auth.password });\r\n\r\n    if(data.status === \"success\"){\r\n        dispatch({\r\n            type: UPDATE_FILE,\r\n            payload: {...newValues, id}\r\n        });\r\n        dispatch(fetchFile(id));\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\nexport const createFile = (values) => async (dispatch, getState) => {\r\n    const response = await sirs.post(\"/files/create\", {...values, username: getState().auth.username, password: getState().auth.password });\r\n\r\n    dispatch({\r\n        type: CREATE_FILE\r\n    })\r\n\r\n    dispatch(fetchFile(response.data.file.id));\r\n}\r\n\r\nexport const fetchUsers = () => async (dispatch, getState) => {\r\n    const response = await sirs.get('/users', {params: { username: getState().auth.username, password: getState().auth.password }});\r\n\r\n    dispatch({\r\n            type: FETCH_USERS,\r\n            payload: response.data.users\r\n    });\r\n};\r\n\r\nexport const createRole = (fileId, values) => async (dispatch, getState) => {\r\n    const response = await sirs.post(`/files/${fileId}/roles`, {...values, username: getState().auth.username, password: getState().auth.password });\r\n\r\n    dispatch({\r\n            type: CREATE_ROLE,\r\n    });\r\n\r\n    dispatch(fetchRoles(fileId));\r\n}\r\n\r\n\r\nexport const fetchRoles = (fileId) => async (dispatch, getState) => {\r\n    const {data} = await sirs.get(`/files/${fileId}/roles`, {params: { username: getState().auth.username, password: getState().auth.password }});\r\n\r\n    dispatch({\r\n        type: FETCH_ROLES,\r\n        payload: {\r\n            fileId,\r\n            roles: data.roles\r\n        }\r\n    });\r\n\r\n}\r\n\r\nexport const revokeRole = (fileId, userId) => async (dispatch, getState) => {\r\n    var params = {\r\n        username: getState().auth.username,\r\n        password: getState().auth.password,\r\n        userId,\r\n        read: false,\r\n        write: false\r\n    }\r\n    const {data} = await sirs.post(`/files/${fileId}/roles`, params);\r\n\r\n    dispatch({\r\n        type: REVOKE_ROLE,\r\n        payload: {\r\n            fileId\r\n        }\r\n    });\r\n\r\n    dispatch(fetchRoles(fileId));\r\n\r\n}\r\n\r\nexport const checkFileChanged = (id) => async (dispatch, getState) => {\r\n    const {data} = await sirs.get(`/files/${id}`, {params: { username: getState().auth.username, password: getState().auth.password }});\r\n\r\n    if(data.status === \"success\"){\r\n        var localFile = getState().files[id];\r\n        var changed = false;\r\n        var corrupted = data.file.corrupted;\r\n\r\n        if(localFile.content != data.file.content || localFile.name != data.file.name){\r\n            changed = true;\r\n        }\r\n\r\n        dispatch({\r\n                type: FILE_CHANGED,\r\n                payload: {\r\n                    id,\r\n                    changed,\r\n                    corrupted\r\n                }\r\n        });\r\n    }\r\n}\r\n","export const USER_LOGIN = \"USER_LOGIN\";\r\nexport const USER_LOGIN_SUCCESS = \"USER_LOGIN_SUCCESS\";\r\nexport const USER_LOGIN_FAILED = \"USER_LOGIN_FAILED\";\r\nexport const USER_LOGOUT = \"USER_LOGOUT\";\r\nexport const USER_REGISTER = \"USER_REGISTER\";\r\nexport const USER_REGISTER_SUCCESS = \"USER_REGISTER_SUCCESS\";\r\nexport const USER_REGISTER_FAILED = \"USER_REGISTER_FAILED\";\r\nexport const FETCH_FILES = \"FETCH_FILES\";\r\nexport const FETCH_FILE = \"FETCH_FILE\";\r\nexport const FILE_CHANGED = \"FILE_CHANGED\";\r\nexport const UPDATE_FILE = \"UPDATE_FILE\";\r\nexport const CREATE_FILE = \"CREATE_FILE\";\r\nexport const FETCH_USERS = \"FETCH_USERS\";\r\nexport const CREATE_ROLE = \"CREATE_ROLE\";\r\nexport const FETCH_ROLES = \"FETCH_ROLES\";\r\nexport const REVOKE_ROLE = \"REVOKE_ROLE\";\r\n","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\n\r\nclass FileForm extends React.Component{\r\n    renderError({ error, touched }) {\r\n        if (touched && error) {\r\n            return (\r\n                <div className=\"ui error message\">\r\n                    <div className=\"header\">{error}</div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    renderInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <input {...input} autoComplete=\"off\" />\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    renderTextareaInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <textarea {...input} autoComplete=\"off\"></textarea>\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    onSubmit = formValues => {\r\n        this.props.onSubmit(formValues);\r\n        this.props.reset();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <form\r\n                onSubmit={this.props.handleSubmit(this.onSubmit)}\r\n                className=\"ui form error\"\r\n            >\r\n                <Field name=\"name\" component={this.renderInput} label=\"File's name\" />\r\n                <Field name=\"content\" component={this.renderTextareaInput} label=\"File's content\" />\r\n                <button className=\"ui button primary\">Save</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nconst validate = formValues => {\r\n    const errors = {};\r\n\r\n    if (!formValues.name) {\r\n        errors.title = 'You must enter a file name';\r\n    }\r\n\r\n    if (!formValues.content && formValues.content != \"\") {\r\n        errors.description = 'You must enter a description';\r\n    }\r\n\r\n    return errors;\r\n}\r\n\r\n\r\nexport default reduxForm({\r\n    form: 'fileForm',\r\n    validate,\r\n    enableReinitialize: true\r\n})(FileForm);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { createFile } from '../../actions';\r\nimport FileForm from './FileForm'\r\n\r\n\r\n\r\nclass FileCreate extends React.Component{\r\n    onSubmit = (formValues) => {\r\n        this.props.createFile(formValues);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div>\r\n                <div className=\"ui huge header\">Create a new file</div>\r\n                <FileForm  onSubmit={this.onSubmit}/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default connect(null, {createFile})(FileCreate);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { fetchFiles } from '../../actions';\r\nimport FileCreate from './FileCreate';\r\n\r\nclass FilesList extends React.Component {\r\n    interval = null;\r\n    componentDidMount() {\r\n        this.props.fetchFiles();\r\n        this.interval = setInterval(() => {\r\n            this.props.fetchFiles()\r\n        }, 2000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    renderList(){\r\n        if(this.props.files.length == 0){\r\n            return <div>You have no files!</div>;\r\n        }\r\n\r\n        return this.props.files.map(file => {\r\n            return (\r\n                <div className=\"item\" key={file.id}>\r\n                    <i className=\"large middle aligned icon file\" />\r\n                    <div className=\"content\">\r\n                        <Link to={`/files/${file.id}`} className=\"header\">\r\n                            {file.name}\r\n                        </Link>\r\n                        <div className=\"description\">\r\n                            Permissions: {(file.permissions.read) ? \"r\" : \"\"}{(file.permissions.write) ? \"w\" : \"\"}\r\n                            { (file.owner === this.props.userId) ? <div>You own this file</div> : <div>You DO NOT own this file</div> }\r\n                            { (file.corrupted === true) ? <div className=\"ui orange header\" style={{fontSize: \"1em\"}}>This file is corrupted</div> : \"\" }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    render() {\r\n            return (\r\n                <div className=\"ui grid centered\">\r\n                    <div className=\"seven wide column\">\r\n                        <div className=\"ui huge header\">List of files {(this.props.files.length > 0) ? \"(\"+this.props.files.length+\")\" : \"\"}</div>\r\n                        <div className=\"ui celled list\">{this.renderList()}</div>\r\n                    </div>\r\n                    <div className=\"five wide column\">\r\n                        <FileCreate />\r\n                    </div>\r\n                </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        userId: state.auth.userId,\r\n        files: Object.values(state.files),\r\n        userId: state.auth.userId,\r\n        isLoggedIn: state.auth.isLoggedIn\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    { fetchFiles }\r\n)(FilesList);\r\n","import React from 'react';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchUsers } from '../../actions';\r\n\r\n\r\nclass FileRolesForm extends React.Component{\r\n    renderError({ error, touched }) {\r\n        if (touched && error) {\r\n            return (\r\n                <div className=\"ui error message\">\r\n                    <div className=\"header\">{error}</div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    componentDidMount = () =>{\r\n        this.props.fetchUsers();\r\n    }\r\n\r\n    renderInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <input {...input} autoComplete=\"off\" />\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    renderBooleanInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <select {...input} autoComplete=\"off\">\r\n                    <option value=\"\" disabled defaultValue>Select an option</option>\r\n                    <option value=\"true\">Yes</option>\r\n                    <option value=\"false\">No</option>\r\n                </select>\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    renderUserSelectInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <select {...input} autoComplete=\"off\">\r\n                    { this.props.users.map((user) => {\r\n                        return <option value={user.id} key={user.id}>{user.username} ({user.name})</option>\r\n                    }) }\r\n                </select>\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    onSubmit = formValues => {\r\n        this.props.onSubmit(formValues);\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <form\r\n                onSubmit={this.props.handleSubmit(this.onSubmit)}\r\n                className=\"ui form error\"\r\n            >\r\n                <Field name=\"userId\" component={this.renderUserSelectInput} label=\"Target user\" />\r\n                <Field name=\"read\" component={this.renderBooleanInput} label=\"Read permissions\" />\r\n                <Field name=\"write\" component={this.renderBooleanInput} label=\"Write permissions\" />\r\n                <button className=\"ui button primary\">Save</button>\r\n            </form>\r\n        );\r\n    }\r\n}\r\n\r\nconst validate = formValues => {\r\n    const errors = {};\r\n\r\n    if (!formValues.userId) {\r\n        errors.title = 'You must enter a file name';\r\n    }\r\n    if (!formValues.read) {\r\n        errors.read = 'You must select a value for the read permission';\r\n    }\r\n    if (!formValues.write) {\r\n        errors.write = 'You must select a value for the write permission';\r\n    }\r\n\r\n    return errors;\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return { users: Object.values(state.users) };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, {fetchUsers})(reduxForm({\r\n    form: 'fileRolesForm',\r\n    validate,\r\n    enableReinitialize: true\r\n})(FileRolesForm));\r\n","import React from 'react'\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchRoles, revokeRole } from '../../actions';\r\n\r\nclass FileRolesList extends React.Component{\r\n    componentDidMount = () => {\r\n        this.props.fetchRoles(this.props.fileId);\r\n    }\r\n\r\n    onRevokeClick = (userId) => {\r\n        this.props.revokeRole(this.props.fileId, userId);\r\n    }\r\n\r\n    renderRoles = () => {\r\n        if(this.props.roles.length == 0){\r\n            return <div>This file has no roles assign to it.</div>;\r\n        }\r\n\r\n        return this.props.roles.map((role, index) => {\r\n            return (\r\n                <div className=\"item\" key={index}>\r\n                    <div className=\"right floated content\">\r\n                        <div className=\"ui button\" onClick={() => {this.onRevokeClick(role.user.id)}}>Revoke</div>\r\n                    </div>\r\n                    <img className=\"ui avatar image\" src=\"/app/avatar.png\" />\r\n                    <div className=\"content\">\r\n                        <span className=\"header\">{role.user.username} ({role.user.name})</span>\r\n                        Permissions:  {(role.read) ? \"read \" : \"\"}{(role.write) ? \"write\" : \"\"}\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    render = () => {\r\n        if(this.props.file.owner != this.props.userId){\r\n            return <div>You can´t see the roles for this file because you don't own it.</div>\r\n        }\r\n\r\n        if(!this.props.file.roles){\r\n            return (<div>Loading...</div>);\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui middle aligned divided list\">\r\n                { this.renderRoles() }\r\n            </div>\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) =>{\r\n    return {\r\n            file: state.files[ownProps.fileId],\r\n            roles: state.files[ownProps.fileId].roles,\r\n            userId: state.auth.userId\r\n    };\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, { fetchRoles, revokeRole })(FileRolesList);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { fetchFile, updateFile, createRole, checkFileChanged } from '../../actions';\r\nimport FileForm from './FileForm';\r\nimport FileRolesForm from './FileRolesForm';\r\nimport FileRolesList from './FileRolesList';\r\n\r\n\r\n\r\nclass FileEdit extends React.Component{\r\n    interval = null;\r\n\r\n\r\n    componentWillMount(){\r\n        this.props.fetchFile(this.props.match.params.id);\r\n        this.startFileMonitoring();\r\n    }\r\n\r\n    startFileMonitoring = () => {\r\n        if(this.interval == null){\r\n            this.interval = setInterval(() => {\r\n                this.props.checkFileChanged(this.props.match.params.id);\r\n            }, 2000);\r\n        }\r\n    }\r\n\r\n    stopFileMonitoring = () =>{\r\n        if(this.interval != null){\r\n            clearInterval(this.interval);\r\n            this.interval = null;\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.interval);\r\n    }\r\n\r\n    onFileFormSubmit = (formValues) => {\r\n        this.props.updateFile(this.props.match.params.id, formValues);\r\n        this.stopFileMonitoring();\r\n        setTimeout(this.startFileMonitoring, 2000); //Not so good\r\n    }\r\n\r\n    onFileRoleFormSubmit = (formValues) => {\r\n        this.props.createRole(this.props.match.params.id, formValues);\r\n    }\r\n\r\n    refetchFile = () => {\r\n        this.props.fetchFile(this.props.match.params.id);\r\n    }\r\n\r\n    renderFileChanged(){\r\n        if(this.props.fileChanged && !this.props.file.corrupted){\r\n            return (\r\n                <div className=\"ui red message\">\r\n                    <div className=\"header\" style={{textAlign:\"center\"}}>\r\n                        <p>Seems like this file was updated by someone else.</p>\r\n                        <button className=\"ui button\" onClick={this.refetchFile}>\r\n                            <i className=\"sync icon\"></i> Reload file\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    renderFileCorrupted(){\r\n        if(this.props.corrupted){\r\n            return (\r\n                <div className=\"ui red message\">\r\n                    <div className=\"header\" style={{textAlign:\"center\"}}>\r\n                        <p>This file is corrupted and because of that the content may have been changed.<br />\r\n                        Your changes will override the corrupted file.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n\r\n    render(){\r\n        if(!this.props.file){\r\n            return <div>Loading...</div>;\r\n        }\r\n\r\n        return (\r\n            <div className=\"ui grid centered\">\r\n                <div className=\"seven wide column\">\r\n                    {this.renderFileCorrupted()}\r\n                    {this.renderFileChanged()}\r\n                    <div className=\"ui huge header\">Edit file: {this.props.file.name}</div>\r\n                    <FileForm initialValues={{name: this.props.file.name, content: this.props.file.content}} onSubmit={this.onFileFormSubmit}/>\r\n                    <br />\r\n                    <Link to={'/'} className=\"header\">\r\n                    <button className=\"ui labeled icon button\">\r\n                        <i className=\"chevron left icon\"></i>\r\n                        Return to list of files\r\n                    </button>\r\n                    </Link>\r\n                </div>\r\n                <div className=\"five wide column\">\r\n                    <div className=\"ui huge header\">Roles to this file</div>\r\n                    <FileRolesList fileId={this.props.file.id}/>\r\n\r\n                    <div className=\"ui huge header\">Edit file roles</div>\r\n                    { (this.props.userId === this.props.file.owner) ?\r\n                        <FileRolesForm onSubmit={this.onFileRoleFormSubmit}/>\r\n                    :\r\n                        <div>You can't change permissions for this file because you don´t own it.</div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        file : state.files[ownProps.match.params.id],\r\n        userId: state.auth.userId, fileChanged:\r\n        state.files[ownProps.match.params.id].changed,\r\n        corrupted: state.files[ownProps.match.params.id].corrupted\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, {fetchFile, updateFile, createRole, checkFileChanged})(FileEdit);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { login } from '../actions';\r\n\r\n\r\n\r\nclass Login extends React.Component{\r\n    renderError({ error, touched }) {\r\n        if (touched && error) {\r\n            return (\r\n                <div className=\"ui error message\">\r\n                    <div className=\"header\">{error}</div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    onSubmit = ({username, password}) => {\r\n        this.props.login(username, password);\r\n    };\r\n\r\n    renderInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <input {...input} autoComplete=\"off\" />\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    renderSubmitButton = () =>{\r\n        if(this.props.checkingLogin === true){\r\n            return <button className=\"ui button primary\"><i className=\"notched circle loading icon button\"></i> Checking credentials...</button>\r\n        }else{\r\n            return <button className=\"ui button primary\">Login</button>\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"ui grid centered\">\r\n                <div className=\"seven wide column\">\r\n                    <div className=\"ui huge header centered\">Login into your account</div>\r\n                    <form onSubmit={this.props.handleSubmit(this.onSubmit)} className=\"ui form error\">\r\n                        <Field name=\"username\" component={this.renderInput} label=\"Username\" />\r\n                        <Field name=\"password\" component={this.renderInput} label=\"Password\" />\r\n                        <div style={{display: \"flex\", justifyContent: \"space-between\", alignItems:\"center\"}}>\r\n                        <div>{ this.renderSubmitButton() }</div>\r\n                        <div><Link to=\"/register\" className=\"header\">Create a new account</Link></div>\r\n                        </div>\r\n                    </form>\r\n                    { (this.props.triedLogin && !this.props.isLoggedIn) ? (<p className=\"ui red header\">Login failed!</p>) : \"\"}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst validate = formValues => {\r\n    const errors = {};\r\n\r\n    if (!formValues.username) {\r\n        errors.username = 'You must type in your username';\r\n    }\r\n\r\n    if (!formValues.password) {\r\n        errors.password = 'You must type in your password';\r\n    }\r\n\r\n    return errors;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        triedLogin: state.auth.triedLogin,\r\n        isLoggedIn: state.auth.isLoggedIn,\r\n        checkingLogin: state.auth.checkingLogin\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { login })(reduxForm({\r\n    form: 'loginForm',\r\n    validate\r\n})(Login));\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Field, reduxForm } from 'redux-form';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nimport { register } from '../actions';\r\n\r\n\r\n\r\nclass Register extends React.Component{\r\n    renderError({ error, touched }) {\r\n        if (touched && error) {\r\n            return (\r\n                <div className=\"ui error message\">\r\n                    <div className=\"header\">{error}</div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    onSubmit = ({name, username, password}) => {\r\n        this.props.register(name, username, password);\r\n    };\r\n\r\n    renderInput = ({ input, label, meta }) => {\r\n        const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n        return (\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <input {...input} autoComplete=\"off\" />\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    renderSubmitButton = () =>{\r\n        if(this.props.checkingRegister === true){\r\n            return <button className=\"ui button primary\"><i className=\"notched circle loading icon button\"></i> Creating your account...</button>\r\n        }else{\r\n            return <button className=\"ui button primary\">Register</button>\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        if(this.props.registeredSuccess){\r\n            return <Redirect to=\"/\" />;\r\n        }\r\n\r\n        return (\r\n        <div className=\"ui grid centered\">\r\n            <div className=\"seven wide column\">\r\n                <div class=\"ui huge header centered\">Create a new account</div>\r\n                <form onSubmit={this.props.handleSubmit(this.onSubmit)} className=\"ui form error\">\r\n                    <Field name=\"name\" component={this.renderInput} label=\"Name\" />\r\n                    <Field name=\"username\" component={this.renderInput} label=\"Username\" />\r\n                    <Field name=\"password\" component={this.renderInput} label=\"Password\" />\r\n                    <div style={{display: \"flex\", justifyContent: \"space-between\", alignItems:\"center\"}}>\r\n                        { this.renderSubmitButton() }\r\n                        <Link to=\"/\" className=\"header\">Login into your account</Link>\r\n                    </div>\r\n                </form>\r\n                { (this.props.registerFailedMessage) ? (<p className=\"ui red header\">{ this.props.registerFailedMessage }</p>) : \"\"}\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst validate = formValues => {\r\n    const errors = {};\r\n\r\n    if (!formValues.name) {\r\n        errors.password = 'You must type in your name';\r\n    }\r\n    if (!formValues.username) {\r\n        errors.username = 'You must type in your username';\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = 'You must type in your password';\r\n    }\r\n\r\n    return errors;\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        isLoggedIn: state.auth.isLoggedIn,\r\n        registeredSuccess: state.auth.registeredSuccess,\r\n        checkingRegister: state.auth.checkingRegister,\r\n        registerFailedMessage: state.auth.registerFailedMessage,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, { register })(reduxForm({\r\n    form: 'registerForm',\r\n    validate\r\n})(Register));\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { logout } from '../actions';\r\n\r\nclass UserHeaderMenu extends React.Component{\r\n\r\n    onLogoutClick = () =>{\r\n        this.props.logout();\r\n    }\r\n\r\n    render = () => {\r\n        if(this.props.isLoggedIn){\r\n            return (\r\n                <div className=\"item\" style={{display: \"flex\", alignItems: \"center\", height:\"100%\"}}>\r\n                    <img className=\"ui mini circular image\" src=\"/app/avatar.png\" />\r\n                    <div className=\"content\" style={{marginLeft:\"10px\"}}>\r\n                      <div className=\"ui sub header\">{this.props.name}</div>\r\n                      <span style={{cursor:\"pointer\"}} onClick={this.onLogoutClick}>Logout</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }else{\r\n            return (\r\n                <div className=\"item\" style={{display: \"flex\", alignItems: \"center\", height:\"100%\"}}>\r\n                    <Link to=\"/\">\r\n                        <button className=\"ui secondary button\">\r\n                            <i className=\"icon users\"></i>\r\n                            Login\r\n                        </button>\r\n                    </Link>\r\n                    <Link to=\"/register\">\r\n                        <button className=\"ui secondary button\">\r\n                        <i className=\"icon wpforms\"></i>\r\n                            Register\r\n                        </button>\r\n                    </Link>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n        return { isLoggedIn: state.auth.isLoggedIn, name: state.auth.name };\r\n}\r\n\r\nexport default connect(mapStateToProps, {logout})(UserHeaderMenu);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport UserHeaderMenu from './UserHeaderMenu';\r\n\r\nconst Header = () => {\r\n  return (\r\n    <div className=\"ui secondary pointing menu\" style={{backgroundColor:\"#cacaca\"}}>\r\n        <div className=\"item\" style={{display:\"flex\", alignItems:\"center\", height:\"100%\"}}>\r\n            <Link to=\"/\" style={{fontSize: \"24px\", color:\"black\"}}>\r\n                SIRS@A47\r\n            </Link>\r\n        </div>\r\n\r\n        <div className=\"right menu\">\r\n            <UserHeaderMenu />\r\n        </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { connect } from 'react-redux';\r\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\r\n\r\n\r\nimport FilesList from './files/FilesList';\r\nimport FileEdit from './files/FileEdit';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport Header from './Header';\r\n\r\nclass App extends React.Component {\r\n    constructor(props){\r\n            super(props);\r\n\r\n    };\r\n\r\n    componentDidMount = () => {\r\n        //this.state\r\n    }\r\n\r\n    renderLoggedOutRoutes = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <Route path=\"/app/register\" exact component={Register}/>\r\n                <Route path=\"/app/login\" exact component={Login}/>\r\n                <Route path=\"/app/\" exact component={Login}/>\r\n                <Route path=\"/app/index.html\" exact component={() => <Redirect to=\"/app/\" />}/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    renderLoggedInRoutes = () => {\r\n        return (\r\n            <React.Fragment>\r\n                <Route path=\"/app/files/:id\" exact component={FileEdit} />\r\n                <Route path=\"/app/files\" exact component={FilesList}/>\r\n                <Route path=\"/app/\" exact component={() => <Redirect to=\"/app/files\" />}/>\r\n                <Route path=\"/app/index.html\" exact component={() => <Redirect to=\"/app/\" />}/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <BrowserRouter>\r\n                <React.Fragment>\r\n                    <Header />\r\n                    <Switch>\r\n                        { (this.props.isLoggedIn) ? this.renderLoggedInRoutes() : this.renderLoggedOutRoutes() }\r\n                    </Switch>\r\n                </React.Fragment>\r\n            </BrowserRouter>\r\n        );\r\n    };\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return { isLoggedIn: state.auth.isLoggedIn };\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import {\r\n    USER_LOGIN,\r\n    USER_LOGOUT,\r\n    USER_LOGIN_FAILED,\r\n    USER_LOGIN_SUCCESS,\r\n    USER_REGISTER,\r\n    USER_REGISTER_SUCCESS,\r\n    USER_REGISTER_FAILED,\r\n} from '../actions/types';\r\n\r\nconst INITIAL_STATE = {\r\n    checkingRegister: false,\r\n    registeredSuccess: null,\r\n    loggedFromRegister: false,\r\n    registerFailedMessage: \"\",\r\n\r\n    checkingLogin: false,\r\n    triedLogin: false,\r\n    isLoggedIn: false,\r\n    userId: null,\r\n    username: \"\",\r\n    password: \"\",\r\n    name: \"\"\r\n}\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch (action.type) {\r\n        case USER_LOGIN:\r\n            return { ...state, checkingLogin: true  };\r\n        case USER_LOGIN_SUCCESS:\r\n            return { ...state,\r\n                        isLoggedIn: true,\r\n                        userId: action.payload.userId,\r\n                        username: action.payload.username,\r\n                        password: action.payload.password,\r\n                        name: action.payload.name,\r\n                        loggedFromRegister: action.payload.loggedFromRegister,\r\n                        checkingLogin: false,\r\n                        triedLogin: true\r\n                     };\r\n        case USER_LOGIN_FAILED:\r\n            return { ...state,\r\n                        checkingLogin: false,\r\n                        triedLogin: true\r\n            };\r\n        case USER_LOGOUT:\r\n            return { ...INITIAL_STATE };\r\n\r\n        case USER_REGISTER:\r\n            return { ...state, checkingRegister: true };\r\n\r\n        case USER_REGISTER_SUCCESS:\r\n            return { ...state, checkingRegister: false, registeredSuccess: true }\r\n\r\n        case USER_REGISTER_FAILED:\r\n            return { ...state, registerFailedMessage: action.payload, checkingRegister: false }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport { reducer as formReducer } from 'redux-form';\r\n\r\nimport authReducer from './authReducer';\r\nimport fileReducer from './fileReducer';\r\nimport userReducer from './userReducer';\r\n\r\nexport default combineReducers({\r\n    auth : authReducer,\r\n    form : formReducer,\r\n    users: userReducer,\r\n    files : fileReducer\r\n});\r\n","import _ from 'lodash';\r\n\r\nimport {\r\n    FETCH_USERS,\r\n    USER_LOGOUT\r\n} from '../actions/types';\r\n\r\nexport default (state = {}, action) => {\r\n    switch (action.type) {\r\n        case FETCH_USERS:\r\n            return { ...state, ..._.mapKeys(action.payload, 'id') };\r\n        case USER_LOGOUT:\r\n            return {};\r\n    }\r\n\r\n    return state;\r\n};\r\n","import _ from 'lodash';\r\n\r\nimport {\r\n    FETCH_FILES,\r\n    FETCH_FILE,\r\n    UPDATE_FILE,\r\n    CREATE_FILE,\r\n    CREATE_ROLE,\r\n    FETCH_ROLES,\r\n    REVOKE_ROLE,\r\n    USER_LOGOUT,\r\n    FILE_CHANGED,\r\n} from '../actions/types';\r\n\r\nexport default (state = {}, action) => {\r\n    switch (action.type) {\r\n    case FETCH_FILES:\r\n        return {..._.mapKeys(action.payload, 'id')};\r\n    case FETCH_FILE:\r\n        return _.merge({}, state, {[action.payload.id]: {...action.payload, changed: false}});\r\n    case UPDATE_FILE:\r\n        return _.merge({}, state, {[action.payload.id]: action.payload});\r\n    case CREATE_FILE:\r\n        return { ...state };\r\n    case CREATE_ROLE:\r\n        return { ...state };\r\n    case FETCH_ROLES:\r\n        var newState = {...state};\r\n        newState[action.payload.fileId].roles = action.payload.roles\r\n        return newState;\r\n    case REVOKE_ROLE:\r\n        return { ...state };\r\n    case USER_LOGOUT:\r\n        return {};\r\n    case FILE_CHANGED:\r\n        var newState = {...state};\r\n        newState[action.payload.id].changed = action.payload.changed;\r\n        newState[action.payload.id].corrupted = action.payload.corrupted;\r\n        return newState;\r\n    default:\r\n        return state;\r\n    }\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport 'semantic-ui-css/semantic.min.css';\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nimport App from './components/App';\r\nimport reducers from './reducers';\r\n\r\n// Redux debug tools\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(\r\n    reducers,\r\n    composeEnhancers(applyMiddleware(reduxThunk))\r\n);\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App />\r\n    </Provider>,\r\n    document.querySelector(\"#root\")\r\n);\r\n"],"sourceRoot":""}